<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>MonBailZen ‚Äî Suite bail, EDL, IRL, Exports & Tarifs</title>
<meta name="description" content="MonBailZen : baux, EDL illimit√©s, comptabilit√© (charges, IRL), export CSV/PDF, signature (d√©mo) et tarifs."/>
<style>
:root{
  --bg:#0b0f14; --bg2:#0f1520; --card:#121924; --muted:#9fb3c5; --text:#e7f0fb;
  --accent:#7CFF6B; --ring:0 0 0 3px rgba(124,255,107,.3); --shadow:0 8px 25px rgba(0,0,0,.35);
  --radius:16px
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);
  background:radial-gradient(1200px 600px at 70% -10%,rgba(124,255,107,.08),transparent 60%),var(--bg);line-height:1.45}
a{color:inherit;text-decoration:none}
.container{max-width:1180px;margin:0 auto;padding:24px}
.nav{position:sticky;top:0;z-index:50;background:rgba(11,15,20,.8);backdrop-filter:blur(12px);border-bottom:1px solid #182533}
.nav-inner{display:flex;align-items:center;justify-content:space-between;gap:12px}
.brand{display:flex;align-items:center;gap:10px;font-weight:800}
.badge{width:36px;height:28px;border-radius:8px;background:var(--accent);color:#041105;display:grid;place-items:center;font-weight:900}
.menu{display:flex;flex-wrap:wrap;gap:10px}
.tabbtn,.btn{padding:10px 14px;border-radius:999px;border:1px solid #223143;background:#0e141c;color:var(--text);cursor:pointer}
.menu .tabbtn{border-radius:10px}
.tabbtn.active,.tabbtn:hover{background:rgba(124,255,107,.18);color:#0c1c0c}
.btn.accent{background:var(--accent);color:#041105;border-color:transparent;font-weight:800}
.btn.ghost{background:transparent}
.btn:focus-visible{outline:none;box-shadow:var(--ring)}
.grid{display:grid;gap:18px}
.card{background:linear-gradient(180deg,var(--card),#0f1520);border:1px solid #1a2533;border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
h2{margin:4px 0 8px}
label{display:block;margin:10px 0 6px;color:var(--muted)}
input,select,textarea{width:100%;padding:10px 12px;border-radius:12px;border:1px solid #223143;background:#0e141c;color:var(--text)}
.row{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
.col-6{grid-column:span 6} .col-4{grid-column:span 4} .col-3{grid-column:span 3} .col-12{grid-column:span 12}
.table{width:100%;border-collapse:collapse;margin-top:8px}
.table th,.table td{border:1px solid #223143;padding:8px;text-align:left}
.chips{display:flex;gap:8px;flex-wrap:wrap}
.chip{padding:6px 10px;border:1px solid #223143;border-radius:999px;background:#0e1720;color:var(--muted);font-size:.9rem}
.note{color:var(--muted);font-size:.92rem}
.hidden{display:none}
footer{text-align:center;color:var(--muted);margin:32px 0}
.ribbon{display:inline-block;padding:6px 10px;border-radius:8px;background:rgba(124,255,107,.16);color:#1a2;border:1px solid rgba(124,255,107,.35);font-weight:800}
.price{display:flex;align-items:baseline;gap:6px;margin:6px 0 12px}
.price .amt{font-size:38px;font-weight:900}
.segwrap{display:flex;gap:6px;background:#0b1218;border:1px solid #1b2a38;border-radius:999px;padding:6px;flex-wrap:wrap}
.seg{padding:8px 12px;border-radius:999px;cursor:pointer;color:var(--muted)} .seg[aria-checked="true"]{background:var(--accent);color:#041105;font-weight:800}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:20px}
.win{background:#0f1620;border:1px solid #1b2a38;border-radius:18px;max-width:720px;width:100%;padding:16px}
@media (max-width:980px){.row{grid-template-columns:repeat(1,1fr)}}
@media print{
  body{background:#fff;color:#000}
  .nav,.no-print{display:none!important}
  .print-block{display:block}
}
</style>
</head>
<body>
<nav class="nav">
  <div class="container nav-inner">
    <div class="brand"><div class="badge">MBZ</div>MonBailZen</div>
    <div class="menu no-print" id="menu">
      <button class="tabbtn active" data-tab="baux">Baux</button>
      <button class="tabbtn" data-tab="edl">EDL</button>
      <button class="tabbtn" data-tab="compta">Comptabilit√©</button>
      <button class="tabbtn" data-tab="export">Exports</button>
      <button class="tabbtn" data-tab="tarifs">Tarifs</button>
      <a class="btn ghost" href="#demo">Essayer la d√©mo</a>
      <a class="btn accent" href="#login">Login</a>
    </div>
  </div>
</nav>

<main class="container grid">
  <!-- ======================= BAUX ======================= -->
  <section id="baux" class="card">
    <h2>üìÑ G√©n√©rateur de Bail (d√©mo locale)</h2>
    <p class="note">Remplis le formulaire et clique <em>Pr√©visualiser</em> pour obtenir un bail imprimable (PDF via impression syst√®me) ou t√©l√©chargeable (.doc).</p>
    <div class="row">
      <div class="col-6">
        <label>Bailleur</label><input id="b_bailleur" placeholder="Nom Pr√©nom / Soci√©t√©"/>
      </div>
      <div class="col-6">
        <label>Locataire</label><input id="b_locataire" placeholder="Nom Pr√©nom"/>
      </div>
      <div class="col-12">
        <label>Logement / Adresse</label><input id="b_adresse" placeholder="Adresse compl√®te"/>
      </div>
      <div class="col-3"><label>Loyer mensuel (‚Ç¨)</label><input type="number" id="b_loyer" value="650"/></div>
      <div class="col-3"><label>Charges mensuelles (‚Ç¨)</label><input type="number" id="b_charges" value="40"/></div>
      <div class="col-3"><label>D√©p√¥t de garantie (‚Ç¨)</label><input type="number" id="b_depot" value="650"/></div>
      <div class="col-3"><label>√âch√©ance (jour du mois)</label><input type="number" id="b_echeance" value="5"/></div>
      <div class="col-4"><label>Type</label>
        <select id="b_type">
          <option>Location vide</option><option>Meubl√©e</option><option>Saisonni√®re</option>
        </select>
      </div>
      <div class="col-4"><label>D√©but de bail</label><input id="b_debut" type="date"/></div>
      <div class="col-4"><label>Dur√©e (mois)</label><input id="b_duree" type="number" value="12"/></div>
      <div class="col-12 chips"><span class="chip">Clauses: animaux, sous-location, assurance, entretien</span></div>
      <div class="col-12">
        <button class="btn accent" id="b_preview">Pr√©visualiser (PDF)</button>
        <button class="btn" id="b_doc">T√©l√©charger (.doc)</button>
      </div>
    </div>
    <!-- zone imprimable -->
    <div id="bail_print" class="print-block hidden" style="background:#fff;color:#000;padding:16px">
      <h2 style="margin:0 0 8px">Bail d'habitation ‚Äî MonBailZen</h2>
      <div id="bail_content" style="white-space:pre-wrap"></div>
      <p style="margin-top:24px">Fait le <span id="bail_date"></span> ‚Äî Signatures :</p>
      <div style="display:flex;gap:40px;margin-top:30px"><div>Le Bailleur</div><div>Le Locataire</div></div>
    </div>
  </section>

  <!-- ======================= EDL ======================= -->
  <section id="edl" class="card hidden">
    <h2>üõ†Ô∏è EDL illimit√©s (menus d√©roulants, photos & anomalies)</h2>
    <div class="row">
      <div class="col-6"><label>Bien</label><input id="e_bien" placeholder="Ex: 4 rue Quiquerue, Ault"/></div>
      <div class="col-6"><label>Pi√®ce √† ajouter</label>
        <div class="row">
          <div class="col-6"><input id="e_piece" placeholder="Salon, Chambre 1, SDB‚Ä¶"/></div>
          <div class="col-6"><button class="btn accent" id="e_add_piece">Ajouter la pi√®ce</button></div>
        </div>
      </div>
      <div class="col-12">
        <table class="table" id="e_table">
          <thead><tr><th>Pi√®ce</th><th>√âl√©ment</th><th>√âtat</th><th>Photo (URL)</th><th>Anomalie</th><th></th></tr></thead>
          <tbody></tbody>
        </table>
        <button class="btn" id="e_add_ligne">Ajouter ligne</button>
        <button class="btn" id="e_csv">Exporter CSV</button>
      </div>
    </div>
  </section>

  <!-- ======================= COMPTA / IRL ======================= -->
  <section id="compta" class="card hidden">
    <h2>üìà Comptabilit√© (charges) & Indexation IRL</h2>
    <div class="row">
      <div class="col-4"><label>Loyer hors charges (‚Ç¨)</label><input id="c_loyer" type="number" value="650"/></div>
      <div class="col-4"><label>IRL ancien (ex: 140.97)</label><input id="c_irl_ancien" type="number" step="0.01" value="140.97"/></div>
      <div class="col-4"><label>IRL nouveau (ex: 146.21)</label><input id="c_irl_nouveau" type="number" step="0.01" value="146.21"/></div>
      <div class="col-4"><label>√âlec/mois (‚Ç¨)</label><input id="c_elec" type="number" value="60"/></div>
      <div class="col-4"><label>Eau/mois (‚Ç¨)</label><input id="c_eau" type="number" value="25"/></div>
      <div class="col-4"><label>Internet/mois (‚Ç¨)</label><input id="c_net" type="number" value="30"/></div>
      <div class="col-12">
        <button class="btn accent" id="c_calc">Calculer</button>
      </div>
      <div class="col-12">
        <table class="table" id="c_table"><thead><tr><th>Base</th><th>IRL ancien</th><th>IRL nouveau</th><th>Loyer index√©</th><th>Charges</th><th>Total mensuel</th></tr></thead><tbody></tbody></table>
      </div>
    </div>
    <p class="note">Formule IRL : loyer index√© = loyer de base √ó (IRL_nouveau / IRL_ancien).</p>
  </section>

  <!-- ======================= EXPORTS ======================= -->
  <section id="export" class="card hidden">
    <h2>üì§ Exports</h2>
    <p class="note">Exporte les donn√©es saisies (bail & EDL) en CSV ou JSON.</p>
    <div class="chips">
      <button class="btn" id="x_csv">Exporter tout en CSV</button>
      <button class="btn" id="x_json">Exporter tout en JSON</button>
      <button class="btn" id="openSign">Signature (d√©mo)</button>
    </div>
    <pre id="x_preview" style="white-space:pre-wrap;background:#0b1218;border:1px solid #223143;padding:12px;border-radius:12px;margin-top:12px;color:#cfe7ff"></pre>
  </section>

  <!-- ======================= TARIFS ======================= -->
  <section id="tarifs" class="card hidden">
    <h2>üí∂ Tarifs</h2>
    <div class="chips"><span class="chip">Sans engagement</span><span class="chip">Annulation en 1 clic</span><span class="chip">Pause & sauvegarde</span></div>
    <div style="height:10px"></div>
    <div class="segwrap no-print">
      <button class="seg" aria-checked="true" data-plan="mensuel">Mensuel</button>
      <button class="seg" data-plan="annuel">Annuel (-2 mois)</button>
      <button class="seg" data-plan="pause">Pause & sauvegarde</button>
    </div>
    <div class="row" style="margin-top:12px">
      <div class="col-4 card">
        <div class="ribbon">Gratuit</div>
        <h3>Starter</h3>
        <div class="price"><span class="amt" data-amt="starter">0‚Ç¨</span><small data-period>/ mois</small></div>
        <ul class="note">
          <li>1 bien</li><li>EDL illimit√©s (d√©taill√©s)</li><li>D√©mo locale</li><li>Export CSV</li>
        </ul>
        <button class="btn">Essayer</button>
      </div>
      <div class="col-4 card">
        <h3>Pro</h3>
        <div class="price"><span class="amt" data-amt="pro">8‚Ç¨</span><small data-period>/ mois</small></div>
        <ul class="note">
          <li>Jusqu'√† 10 biens</li><li>Logo propri√©taire</li><li>Compta + IRL + exports</li><li>Signature (d√©mo)</li>
        </ul>
        <button class="btn accent">Choisir</button>
      </div>
      <div class="col-4 card">
        <h3>Business</h3>
        <div class="price"><span class="amt" data-amt="business">16‚Ç¨</span><small data-period>/ mois</small></div>
        <ul class="note">
          <li>Biens illimit√©s</li><li>Support prioritaire</li><li>√âquipe & espaces</li><li>Exports avanc√©s</li>
        </ul>
        <button class="btn">Choisir</button>
      </div>
    </div>
    <p class="note">Annuel = 10 mois pay√©s pour 12 d‚Äôacc√®s. Pause & sauvegarde = donn√©es en lecture seule (2‚Ç¨/mois) r√©activables en 1 clic.</p>
  </section>
</main>

<footer>¬© <span id="year"></span> MonBailZen ‚Äî Tous droits r√©serv√©s</footer>

<!-- ======================= MODAL SIGNATURE ======================= -->
<div class="modal" id="signModal" aria-hidden="true">
  <div class="win">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <h3 style="margin:0">Signature (d√©mo)</h3>
      <button class="btn" id="closeSign">Fermer</button>
    </div>
    <p class="note">D√©mo locale : import PDF (non stock√©), ajout d‚Äôune image de signature simul√©e et export impression.</p>
    <div class="row">
      <div class="col-6"><label>Nom signataire</label><input id="s_nom" placeholder="Nom Pr√©nom"/></div>
      <div class="col-6"><label>Charger une image de signature (PNG)</label><input type="file" id="s_file" accept="image/*"/></div>
      <div class="col-12"><canvas id="s_canvas" width="600" height="240" style="background:#fff;border-radius:12px"></canvas></div>
      <div class="col-12">
        <button class="btn accent" id="s_draw">Ins√©rer signature</button>
        <button class="btn" id="s_clear">Effacer</button>
        <button class="btn" id="s_print">Imprimer</button>
      </div>
    </div>
  </div>
</div>

<script>
// =============== CONFIG TARIFS ===============
const PRICING = {
  mensuel : { starter:"0‚Ç¨", pro:"8‚Ç¨",  business:"16‚Ç¨", period:"/ mois"},
  annuel  : { starter:"0‚Ç¨", pro:"80‚Ç¨", business:"160‚Ç¨", period:"/ an"},
  pause   : { starter:"0‚Ç¨", pro:"2‚Ç¨",  business:"2‚Ç¨",  period:"/ mois (lecture seule)"}
};

// =============== NAV TABS ===============
const tabs = ["baux","edl","compta","export","tarifs"];
document.querySelectorAll(".tabbtn").forEach(b=>{
  b.addEventListener("click", ()=>{
    document.querySelectorAll(".tabbtn").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    tabs.forEach(id=> document.getElementById(id).classList.add("hidden"));
    document.getElementById(b.dataset.tab).classList.remove("hidden");
    window.scrollTo({top:0,behavior:"smooth"});
  });
});
document.getElementById("year").textContent = new Date().getFullYear();

// =============== BAUX (preview & .doc) ===============
function bailData(){
  return {
    bailleur:  document.getElementById("b_bailleur").value || "‚Äî",
    locataire: document.getElementById("b_locataire").value || "‚Äî",
    adresse:   document.getElementById("b_adresse").value || "‚Äî",
    loyer:     parseFloat(document.getElementById("b_loyer").value||0),
    charges:   parseFloat(document.getElementById("b_charges").value||0),
    depot:     parseFloat(document.getElementById("b_depot").value||0),
    echeance:  parseInt(document.getElementById("b_echeance").value||5),
    type:      document.getElementById("b_type").value,
    debut:     document.getElementById("b_debut").value || "‚Äî",
    duree:     parseInt(document.getElementById("b_duree").value||12)
  };
}
function bailTexte(d){
  const total = (d.loyer+d.charges).toFixed(2);
  return (
`BAIL D'HABITATION ‚Äî MonBailZen

Entre les soussign√©s :
- Bailleur : ${d.bailleur}
- Locataire : ${d.locataire}

Objet : ${d.type}
Logement : ${d.adresse}

Conditions financi√®res :
- Loyer mensuel hors charges : ${d.loyer.toFixed(2)} ‚Ç¨
- Provision sur charges : ${d.charges.toFixed(2)} ‚Ç¨
- Loyer mensuel total : ${total} ‚Ç¨
- D√©p√¥t de garantie : ${d.depot.toFixed(2)} ‚Ç¨
- √âch√©ance : le ${d.echeance} de chaque mois

Dur√©e : ${d.duree} mois √† compter du ${d.debut}

Clauses et conditions :
- Assurance obligatoire du locataire
- Entretien courant √† la charge du locataire
- Sous-location interdite sans accord √©crit
- Animaux de compagnie selon r√®glement de copropri√©t√©
`
  );
}
document.getElementById("b_preview").addEventListener("click",()=>{
  const t = bailTexte(bailData());
  document.getElementById("bail_content").textContent = t;
  document.getElementById("bail_date").textContent = new Date().toLocaleDateString("fr-FR");
  const printBlock = document.getElementById("bail_print");
  printBlock.classList.remove("hidden");
  // petit d√©lai pour permettre l'affichage avant impression
  setTimeout(()=>window.print(), 50);
});
document.getElementById("b_doc").addEventListener("click",()=>{
  const t = bailTexte(bailData());
  const blob = new Blob([t], {type:"application/msword"});
  const a = document.createElement("a"); a.href = URL.createObjectURL(blob);
  a.download = "bail_monbailzen.doc"; a.click(); URL.revokeObjectURL(a.href);
});

// =============== EDL (table dynamique + CSV) ===============
const etBody = document.querySelector("#e_table tbody");
const ETATS = ["Neuf","Tr√®s bon","Bon","Moyen","√Ä r√©nover"];
const ELS = ["Murs","Plafond","Sol","Porte","Fen√™tre","Prises","√âclairage","Radiateurs","√âlectrom√©nager","Divers"];
function addEdlRow(piece="Salon"){
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td><input value="${piece}"/></td>
    <td><select>${ELS.map(x=>`<option>${x}</option>`).join("")}</select></td>
    <td><select>${ETATS.map(x=>`<option>${x}</option>`).join("")}</select></td>
    <td><input placeholder="https://..."/></td>
    <td><input placeholder="Anomalie/Commentaire"/></td>
    <td><button class="btn" data-del>Ligne -</button></td>
  `;
  etBody.appendChild(tr);
}
document.getElementById("e_add_ligne").addEventListener("click",()=> addEdlRow(document.getElementById("e_piece").value || "Pi√®ce"));
document.getElementById("e_add_piece").addEventListener("click",()=>{
  const p = document.getElementById("e_piece").value || "Pi√®ce";
  for(let i=0;i<3;i++) addEdlRow(p);
});
etBody.addEventListener("click",(e)=>{ if(e.target.dataset.del){ e.target.closest("tr").remove(); }});

function edlAsArray(){
  const rows = [...etBody.querySelectorAll("tr")];
  return rows.map(r=>{
    const tds = r.querySelectorAll("td");
    return {
      piece: tds[0].querySelector("input").value,
      element: tds[1].querySelector("select").value,
      etat: tds[2].querySelector("select").value,
      photo: tds[3].querySelector("input").value,
      anomalie: tds[4].querySelector("input").value
    };
  });
}
document.getElementById("e_csv").addEventListener("click",()=>{
  const bien = document.getElementById("e_bien").value || "Bien";
  const arr = edlAsArray();
  const header = "Bien;Pi√®ce;√âl√©ment;√âtat;Photo;Anomalie\n";
  const body = arr.map(x=>[bien,x.piece,x.element,x.etat,x.photo,x.anomalie].map(v=>`"${(v||"").replace(/"/g,'""')}"`).join(";")).join("\n");
  const blob = new Blob([header+body],{type:"text/csv;charset=utf-8"});
  const a = document.createElement("a"); a.href = URL.createObjectURL(blob);
  a.download = "edl_monbailzen.csv"; a.click(); URL.revokeObjectURL(a.href);
});

// =============== COMPTA / IRL ===============
document.getElementById("c_calc").addEventListener("click",()=>{
  const base = parseFloat(document.getElementById("c_loyer").value||0);
  const irlA = parseFloat(document.getElementById("c_irl_ancien").value||1);
  const irlN = parseFloat(document.getElementById("c_irl_nouveau").value||1);
  const elec = parseFloat(document.getElementById("c_elec").value||0);
  const eau  = parseFloat(document.getElementById("c_eau").value||0);
  const net  = parseFloat(document.getElementById("c_net").value||0);
  const indexe = (base * (irlN/irlA));
  const charges = elec+eau+net;
  const total = indexe + charges;
  const tbody = document.querySelector("#c_table tbody");
  tbody.innerHTML = `<tr>
    <td>${base.toFixed(2)} ‚Ç¨</td><td>${irlA}</td><td>${irlN}</td>
    <td><strong>${indexe.toFixed(2)} ‚Ç¨</strong></td><td>${charges.toFixed(2)} ‚Ç¨</td>
    <td><strong>${total.toFixed(2)} ‚Ç¨</strong></td>
  </tr>`;
});

// =============== EXPORT GLOBAL CSV / JSON ===============
function bailObj(){
  const d = bailData();
  return {type:"bail", ...d, total_mensuel: (d.loyer+d.charges)};
}
document.getElementById("x_csv").addEventListener("click",()=>{
  const edl = edlAsArray();
  const bail = bailObj();
  let csv = "section;champ;valeur\n";
  Object.entries(bail).forEach(([k,v])=> csv += `bail;${k};${v}\n`);
  edl.forEach((x,i)=> Object.entries(x).forEach(([k,v])=> csv += `edl_${i+1};${k};${v}\n`));
  const blob = new Blob([csv],{type:"text/csv;charset=utf-8"});
  const a = document.createElement("a"); a.href = URL.createObjectURL(blob);
  a.download = "monbailzen_export.csv"; a.click(); URL.revokeObjectURL(a.href);
});
document.getElementById("x_json").addEventListener("click",()=>{
  const data = { bail: bailObj(), edl: edlAsArray() };
  const s = JSON.stringify(data,null,2);
  document.getElementById("x_preview").textContent = s;
  const blob = new Blob([s],{type:"application/json"});
  const a = document.createElement("a"); a.href = URL.createObjectURL(blob);
  a.download = "monbailzen_export.json"; a.click(); URL.revokeObjectURL(a.href);
});

// =============== TARIFS (toggle) ===============
const segs = document.querySelectorAll(".seg");
const pEls = document.querySelectorAll("[data-period]");
const amt = {
  starter: document.querySelector('[data-amt="starter"]'),
  pro: document.querySelector('[data-amt="pro"]'),
  business: document.querySelector('[data-amt="business"]')
};
function applyPlan(plan){
  const p = PRICING[plan];
  amt.starter.textContent = p.starter; amt.pro.textContent = p.pro; amt.business.textContent = p.business;
  pEls.forEach(el=> el.textContent = " " + p.period);
}
segs.forEach(b=> b.addEventListener("click",()=>{
  segs.forEach(s=> s.setAttribute("aria-checked","false"));
  b.setAttribute("aria-checked","true");
  applyPlan(b.dataset.plan);
}));
applyPlan("mensuel");

// =============== SIGNATURE (d√©mo canvas) ===============
const signModal = document.getElementById("signModal");
document.getElementById("openSign").addEventListener("click",()=>{ signModal.style.display="flex"; signModal.setAttribute("aria-hidden","false"); });
document.getElementById("closeSign").addEventListener("click",()=>{ signModal.style.display="none"; signModal.setAttribute("aria-hidden","true"); });
signModal.addEventListener("click",(e)=>{ if(e.target===signModal) document.getElementById("closeSign").click(); });

const sCanvas = document.getElementById("s_canvas");
const ctx = sCanvas.getContext("2d");
function drawBoard(){
  ctx.fillStyle="#fff"; ctx.fillRect(0,0,sCanvas.width,sCanvas.height);
  ctx.fillStyle="#000"; ctx.font="16px sans-serif";
  ctx.fillText("Signature de :", 20, 32);
}
drawBoard();
document.getElementById("s_draw").addEventListener("click",()=>{
  const nom = document.getElementById("s_nom").value || "Nom";
  drawBoard();
  ctx.fillStyle="#000"; ctx.fillText(nom, 140, 32);
  if(document.getElementById("s_file").files[0]){
    const r = new FileReader();
    r.onload = e => { const img = new Image(); img.onload=()=>{ ctx.drawImage(img, 40, 60, 520, 150); }; img.src=e.target.result; };
    r.readAsDataURL(document.getElementById("s_file").files[0]);
  }else{
    ctx.font="48px cursive"; ctx.fillText("~ signature ~", 140, 140);
  }
});
document.getElementById("s_clear").addEventListener("click",drawBoard);
document.getElementById("s_print").addEventListener("click",()=> window.print);
</script>
</body>
</html>
