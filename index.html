
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>MonBailZen ‚Äî Baux ‚Ä¢ EDL ‚Ä¢ IRL ‚Ä¢ Signatures ‚Ä¢ Biens & Renta</title>
<meta name="description" content="Baux complets, EDL avanc√©s, IRL/assurance, signatures manuscrites, suivi de rentabilit√© ‚Äî th√®me gold & dark.">
<style>
:root{--bg:#0a0b0f;--bg2:#0f1117;--card:#11141b;--muted:#c7c9d1;--text:#f4f5f7;--accent:#d4af37;--accent-weak:rgba(212,175,55,.16);--ring:0 0 0 3px rgba(212,175,55,.35);--shadow:0 8px 25px rgba(0,0,0,.45);--radius:16px}
*{box-sizing:border-box} body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);background:var(--bg);line-height:1.45}
.container{max-width:1180px;margin:0 auto;padding:22px}
.nav{position:sticky;top:0;z-index:50;background:rgba(10,11,15,.86);backdrop-filter:blur(10px);border-bottom:1px solid #232937}
.nav-inner{display:flex;align-items:center;justify-content:space-between;gap:12px}
.brand{display:flex;align-items:center;gap:10px;font-weight:800}
.badge{width:36px;height:28px;border-radius:8px;background:var(--accent);color:#211b05;display:grid;place-items:center;font-weight:900}
.build{font-size:.8rem;color:#b7bbca;border:1px solid #2b3041;padding:4px 8px;border-radius:8px}
.menu{display:flex;flex-wrap:wrap;gap:10px}
.tabbtn,.btn{padding:10px 14px;border-radius:10px;border:1px solid #262c3a;background:#0e1219;color:var(--text);cursor:pointer}
.tabbtn.active,.tabbtn:hover{background:var(--accent-weak);color:#1c1a11}
.btn.accent{background:var(--accent);color:#1d1604;border-color:transparent;font-weight:800}
.btn:focus-visible{outline:none;box-shadow:var(--ring)}
.grid{display:grid;gap:18px}
.card{background:linear-gradient(180deg,var(--card),#0e1219);border:1px solid #232937;border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
h2{margin:4px 0 8px}
label{display:block;margin:10px 0 6px;color:var(--muted)}
input,select,textarea{width:100%;padding:10px 12px;border-radius:12px;border:1px solid #262c3a;background:#0d1117;color:var(--text)}
.row{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
.col-6{grid-column:span 6}.col-5{grid-column:span 5}.col-4{grid-column:span 4}.col-3{grid-column:span 3}.col-2{grid-column:span 2}.col-12{grid-column:span 12}
.table{width:100%;border-collapse:separate;border-spacing:0;margin-top:8px;background:#0d1117;border:1px solid #262c3a;border-radius:12px;overflow:hidden}
.table th{background:linear-gradient(180deg,#141926,#101521);color:#f6f6f6;text-align:left;padding:10px 12px;position:sticky;top:0}
.table td{padding:10px 12px;border-top:1px solid #1f2532}
.table tbody tr:nth-child(even){background:#0f1420}
.table tfoot td{font-weight:800;border-top:2px solid #31394b}
.badge-total{display:inline-block;padding:4px 8px;border-radius:999px;background:var(--accent-weak);border:1px solid rgba(212,175,55,.4);color:#e9d79a}
.note{color:var(--muted);font-size:.93rem}
.hidden{display:none}
footer{text-align:center;color:var(--muted);margin:32px 0}
.hero{padding:24px;border-radius:18px;background:linear-gradient(180deg,#12151d,#0e1219);border:1px solid #232937;box-shadow:0 10px 28px rgba(0,0,0,.45);margin-bottom:16px}
.hero .kicker{display:inline-block;background:var(--accent-weak);border:1px solid rgba(212,175,55,.35);color:#e9d79a;border-radius:999px;padding:6px 12px;margin-bottom:10px;font-weight:800;letter-spacing:.2px}
.hero h2{font-size:2.1rem;margin:.2rem 0;color:#f7f7fa}
.hero p{max-width:78ch;color:#cfd3df}
@media (max-width:980px){.row{grid-template-columns:repeat(1,1fr)}}
@media print{body{background:#fff;color:#000}.nav,.no-print{display:none!important}.print-block{display:block}}
</style>
</head>
<body>
<nav class="nav">
  <div class="container nav-inner">
    <div class="brand"><div class="badge">MBZ</div>MonBailZen <span class="build">build v2</span></div>
    <div class="menu no-print" id="menu">
      <button class="tabbtn active" data-tab="home">Accueil</button>
      <button class="tabbtn" data-tab="baux">Baux</button>
      <button class="tabbtn" data-tab="edl">EDL</button>
      <button class="tabbtn" data-tab="biens">Biens & Renta</button>
      <button class="tabbtn" data-tab="sign">Signatures</button>
      <button class="tabbtn" id="resetData">R√©initialiser</button>
    </div>
  </div>
</nav>

<main class="container grid">
  <!-- ========= ACCUEIL ========= -->
  <section id="home" class="card">
    <div class="hero">
      <span class="kicker">Bienvenue üëã</span>
      <h2>G√©n√©rez vos baux, faites vos EDL, suivez vos biens & votre rentabilit√©.</h2>
      <p>IRL/assurance avec courriers auto, signatures manuscrites/import, exports √©l√©gants. Th√®me <em>gold & dark</em> ‚ú®.</p>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:6px">
        <button class="btn accent" onclick="go('baux')">Cr√©er un bail</button>
        <button class="btn" onclick="go('edl')">Faire un EDL</button>
        <button class="btn" onclick="go('biens')">Suivre ma renta</button>
      </div>
    </div>

    <h3>üí∞ Tarifs</h3>
    <table class="table">
      <thead><tr><th>Offre</th><th>Mensuel</th><th>Annuel</th><th>Inclus</th></tr></thead>
      <tbody>
        <tr><td>Essai 7 j</td><td>0 ‚Ç¨</td><td>‚Äî</td><td>1 bail + 1 EDL entr√©e</td></tr>
        <tr><td>Unitaire</td><td>7,90 ‚Ç¨</td><td>‚Äî</td><td>1 bail + 1 EDL entr√©e + cr√©dit sortie 0,5</td></tr>
        <tr><td>Starter</td><td>24 ‚Ç¨/mois</td><td>240 ‚Ç¨/an</td><td>3 baux + 3 EDL + IRL auto + export</td></tr>
        <tr><td>Pro</td><td>59 ‚Ç¨/mois</td><td>590 ‚Ç¨/an</td><td>Illimit√© + logo + exports compta</td></tr>
        <tr><td>Pause & sauvegarde</td><td>2 ‚Ç¨/mois</td><td>20 ‚Ç¨/an</td><td>Lecture seule + conservation</td></tr>
      </tbody>
    </table>
  </section>

  <!-- ========= BAUX (r√©sum√© ‚Äî m√™me contenu que pr√©c√©demment) ========= -->
  <section id="baux" class="card hidden">
    <h2>üìÑ Bail (vide ‚Ä¢ meubl√© ‚Ä¢ saisonnier ‚Ä¢ mobilit√©)</h2>
    <div class="row">
      <div class="col-4"><label>Type</label><select id="b_type"><option>Location vide</option><option>Meubl√©e</option><option>Saisonnier</option><option>Mobilit√©</option></select></div>
      <div class="col-4"><label>Dur√©e (mois)</label><input id="b_duree" type="number" value="36"></div>
      <div class="col-4"><label>Pr√©avis (mois)</label><input id="b_preavis" type="number" value="3"></div>
      <div class="col-6"><label>Bailleur</label><input id="b_bailleur"></div>
      <div class="col-6"><label>Locataire</label><input id="b_locataire"></div>
      <div class="col-12"><label>Adresse</label><input id="b_adresse"></div>
      <div class="col-3"><label>Loyer HC</label><input id="b_loyer" type="number"></div>
      <div class="col-3"><label>Charges</label><input id="b_charges" type="number"></div>
      <div class="col-3"><label>D√©p√¥t</label><input id="b_depot" type="number"></div>
      <div class="col-3"><label>D√©but</label><input id="b_debut" type="date"></div>
      <div class="col-6"><label>Garant(s)</label><input id="b_garant" placeholder="Nom, adresse‚Ä¶"></div>
      <div class="col-6"><label>Clause solidaire (auto)</label><textarea id="b_clause" rows="3" readonly></textarea></div>
    </div>
    <h3>Annexes</h3>
    <textarea id="annexe_libre" rows="5" placeholder="Annexes (DPE, ERP, inventaire‚Ä¶)."></textarea>

    <div class="row">
      <div class="col-6 card">
        <h3>üìà IRL</h3>
        <div class="row">
          <div class="col-4"><label>Trimestre</label><select id="b_irl_trim"><option>T1</option><option>T2</option><option>T3</option><option>T4</option></select></div>
          <div class="col-4"><label>Ann√©e</label><input id="b_irl_year" type="number" value="2025"></div>
          <div class="col-4"><label>Anniversaire</label><input id="b_irl_date" type="date"></div>
          <div class="col-12"><button class="btn accent" id="b_calc_irl">üì© Courrier IRL</button></div>
          <div class="col-12"><div id="b_irl_result" class="note"></div></div>
        </div>
      </div>
      <div class="col-6 card">
        <h3>üè† Assurance</h3>
        <div class="row">
          <div class="col-6"><label>Date attestation</label><input id="b_assu_date" type="date"></div>
          <div class="col-6"><label>Statut</label><select id="b_assu_statut"><option>En attente</option><option>Re√ßue</option><option>Relance √† faire</option></select></div>
          <div class="col-12"><button class="btn accent" id="b_assu_courrier">üì© Courrier assurance</button></div>
          <div class="col-12"><div id="b_assu_note" class="note"></div></div>
        </div>
      </div>
    </div>

    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
      <button class="btn accent" id="b_save">üíæ Enregistrer</button>
      <button class="btn" id="b_preview">üëÅÔ∏è Aper√ßu</button>
    </div>
    <div id="b_preview_zone" class="card hidden">
      <h3>üñ®Ô∏è Aper√ßu</h3><div id="bail_print"></div>
    </div>
  </section>

  <!-- ========= EDL / SIGN / BIENS ========= -->
  <!-- (identiques en structure √† la version pr√©c√©dente ‚Äî conserv√©s pour concision) -->
  <section id="edl" class="card hidden"><h2>üõ†Ô∏è EDL</h2><p class="note">Module complet (pi√®ces, √©l√©ments, photos, relev√©s, inventaire)‚Ä¶</p></section>
  <section id="sign" class="card hidden"><h2>‚úçÔ∏è Signatures</h2><p class="note">Dessinez ou importez vos signatures‚Ä¶</p></section>
  <section id="biens" class="card hidden"><h2>üè† Biens & Rentabilit√©</h2><p class="note">Tableau + graphiques‚Ä¶</p></section>
</main>

<footer>¬© <span id="year"></span> MonBailZen ‚Äî Tous droits r√©serv√©s</footer>

<script>
/* ======= Secours erreurs : affiche un bandeau si une erreur JS survient ======= */
window.addEventListener('error',function(e){
  const bar=document.createElement('div');
  bar.style.cssText="position:fixed;left:0;right:0;bottom:0;background:#4b1f1f;color:#ffdede;padding:8px 12px;border-top:1px solid #7a3a3a;z-index:9999;font-family:monospace";
  bar.textContent="Erreur JS: "+(e.message||"inconnue")+" (ouvre F12 > Console pour le d√©tail)";
  document.body.appendChild(bar);
});

/* ======= Navigation blind√©e ======= */
function go(id){
  document.querySelectorAll('.tabbtn').forEach(b=>b.classList.toggle('active', b.dataset.tab===id));
  document.querySelectorAll('main > section').forEach(sec=>{
    if(!sec.id) return;
    sec.classList.toggle('hidden', sec.id!==id);
  });
  scrollTo({top:0,behavior:'smooth'});
}
document.querySelectorAll('.tabbtn').forEach(b=>b.addEventListener('click',()=>go(b.dataset.tab)));
document.getElementById('resetData').addEventListener('click',()=>{ if(confirm('Effacer les donn√©es locales ?')){ localStorage.clear(); location.reload(); }});
document.getElementById('year').textContent=new Date().getFullYear();
go('home');

/* ======= Modules : init seulement si les √©l√©ments existent ======= */
function $(id){return document.getElementById(id)}
function safe(fn){try{fn&&fn()}catch(err){console.warn('Module en erreur:',err)}}

/* --- BAUX --- */
safe(function(){
  const BAIL_RULES={"Location vide":{duree:36,preavis:3},"Meubl√©e":{duree:12,preavis:1},"Saisonnier":{duree:3,preavis:0},"Mobilit√©":{duree:6,preavis:1}};
  const b_type=$('b_type'), b_duree=$('b_duree'), b_preavis=$('b_preavis'), b_garant=$('b_garant'), b_clause=$('b_clause');
  const b_bailleur=$('b_bailleur'), b_locataire=$('b_locataire'), b_adresse=$('b_adresse'), b_loyer=$('b_loyer'), b_charges=$('b_charges'), b_depot=$('b_depot'), b_debut=$('b_debut'), annexe_libre=$('annexe_libre');
  const b_preview_btn=$('b_preview'), b_preview_zone=$('b_preview_zone'), bail_print=$('bail_print'), b_save=$('b_save');
  if(!b_type) return;

  function apply(){
    const t=b_type.value, r=BAIL_RULES[t]; if(!r) return;
    if(t==="Saisonnier"||t==="Mobilit√©"){ if(!b_duree.value) b_duree.value=r.duree; } else { b_duree.value=r.duree; }
    b_preavis.value=r.preavis;
    b_clause.value = (b_garant.value||"").trim() ? `Le garant, ${b_garant.value}, s‚Äôengage solidairement pour ${b_duree.value} mois (r√©gime ${t.toLowerCase()}).` : "Aucun garant d√©clar√©.";
  }
  [b_type,b_garant].forEach(el=>el&&el.addEventListener('input',apply)); apply();

  function bailObj(){return{
    type:b_type.value,duree:+b_duree.value,preavis:+b_preavis.value,bailleur:b_bailleur.value,locataire:b_locataire.value,
    adresse:b_adresse.value,loyer:+b_loyer.value||0,charges:+b_charges.value||0,depot:+b_depot.value||0,debut:b_debut.value,
    garant:b_garant.value,annexe:annexe_libre.value
  }}
  b_save?.addEventListener('click',()=>{localStorage.setItem('mbz.bail',JSON.stringify(bailObj()));alert('Bail enregistr√©.');});
  b_preview_btn?.addEventListener('click',()=>{
    const d=bailObj(), total=(d.loyer+d.charges).toFixed(2);
    b_preview_zone.classList.remove('hidden');
    bail_print.innerHTML=`<p><strong>${d.type}</strong></p>
      <p><strong>Bailleur :</strong> ${d.bailleur}<br><strong>Locataire :</strong> ${d.locataire}<br><strong>Adresse :</strong> ${d.adresse}</p>
      <p><strong>Loyer HC :</strong> ${d.loyer} ‚Ç¨ ‚Äî <strong>Charges :</strong> ${d.charges} ‚Ç¨ ‚Äî <strong>Total :</strong> ${total} ‚Ç¨</p>
      <p><strong>Dur√©e :</strong> ${d.duree} mois ‚Äî <strong>Pr√©avis :</strong> ${d.preavis} mois</p>
      <p><strong>Garant :</strong> ${d.garant||"Aucun"}</p>
      <p><em>Clause solidaire :</em> ${b_clause.value}</p>
      <p><strong>Annexes :</strong><br>${(d.annexe||"‚Äî").replace(/\n/g,"<br>")}</p>`;
  });

  // IRL/Assurance mini (pas bloquant si absent)
  const trim=$('b_irl_trim'), y=$('b_irl_year'), res=$('b_irl_result'), calc=$('b_calc_irl');
  if(calc) calc.addEventListener('click',()=>{
    const ref={T1:138.61,T2:140.59,T3:142.69,T4:144.25}, t=trim.value, year=+y.value;
    const old=ref[t], now=ref[t]; const pct= old? ((now-old)/old*100):0; const nv=(+b_loyer.value||0)*(1+pct/100);
    res.innerHTML=`IRL ${t} ${year}: ${old} ‚Üí ${now} (+${pct.toFixed(2)}%)<br>Nouveau loyer HC: <strong>${nv.toFixed(2)} ‚Ç¨</strong>`;
  });
  const aBtn=$('b_assu_courrier'), aDate=$('b_assu_date'), aNote=$('b_assu_note');
  aBtn?.addEventListener('click',()=>{aNote.innerHTML=`<h4>Courrier assurance</h4><p>Merci d‚Äôenvoyer votre attestation avant le ${aDate.value||"____"}.</p>`});
});

/* --- Les autres modules complets existent dans ta version pr√©c√©dente.
   Ici on les ‚Äúd√©samorce‚Äù pour √©viter tout blocage si un id manque.
   Tu peux recoller les sections EDL/Sign/Biens compl√®tes une fois la nav ok. --- */
</script>
</body>
</html>
